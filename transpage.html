<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <link type="text/css" rel="stylesheet" href="transpage.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Roboto&display=swap"
      rel="stylesheet"
    />

    <title>Transaction page</title>
  </head>
  <body>

    <table style="margin-left: 31px;margin-top: 30px;">
      <tbody>
        <tr>
          <td>
            <header>
              <a href="OG-firstpage.html">
                <svg
                  width="169"
                  height="39"
                  viewBox="0 0 169 39"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M18.5801 31.5952C18.1169 31.599 17.6575 31.5114 17.2282 31.3375C16.7989 31.1636 16.4081 30.9067 16.0781 30.5817C15.7481 30.2566 15.4855 29.8696 15.3052 29.443C15.1249 29.0163 15.0305 28.5582 15.0273 28.0951V23.0074L22.0994 19.2969L22.1328 28.0951C22.1253 29.0301 21.7468 29.924 21.0807 30.5803C20.4146 31.2365 19.5152 31.6016 18.5801 31.5952Z"
                    fill="#FFE30F"
                  />
                  <path
                    d="M24.9294 36.8872V14.4135L15.2179 19.6733C14.3875 20.1239 13.4133 20.23 12.5054 19.9688C11.5975 19.7076 10.8286 19.1 10.3645 18.2771C10.1414 17.8697 10.0014 17.422 9.95283 16.9601C9.90423 16.4981 9.94793 16.0311 10.0814 15.5862C10.2149 15.1413 10.4355 14.7273 10.7303 14.3684C11.0252 14.0095 11.3885 13.7127 11.799 13.4955L29.5293 3.86528C29.7912 3.72389 30.0854 3.65284 30.383 3.65907C30.6806 3.6653 30.9715 3.74859 31.2272 3.90081C31.483 4.05304 31.695 4.269 31.8424 4.5276C31.9898 4.7862 32.0677 5.07861 32.0683 5.37627V27.8499L41.775 22.5901C42.6054 22.1396 43.5796 22.0335 44.4875 22.2947C45.3954 22.5559 46.1643 23.1634 46.6284 23.9863C46.8535 24.3933 46.995 24.8411 47.0446 25.3035C47.0943 25.7659 47.051 26.2336 46.9174 26.679C46.7837 27.1245 46.5624 27.5387 46.2665 27.8974C45.9705 28.2562 45.6058 28.5521 45.1939 28.768L27.4684 38.4221C27.067 38.6395 26.5957 38.6886 26.1581 38.5586C25.7205 38.4286 25.3525 38.1301 25.135 37.7287C24.9972 37.4698 24.9265 37.1805 24.9294 36.8872Z"
                    fill="#2357D1"
                  />
                  <path
                    d="M9.44781 11.6455L22.1669 4.76956C22.1648 3.94329 21.9487 3.13168 21.5395 2.41383C21.1304 1.69598 20.5422 1.09641 19.8323 0.67357C19.1224 0.250729 18.3151 0.0190495 17.489 0.00112545C16.663 -0.0167986 15.8464 0.179641 15.1188 0.571292L1.86893 7.74372C1.45745 7.96004 1.09325 8.25626 0.797653 8.61505C0.502054 8.97384 0.280994 9.38798 0.147413 9.83325C0.0138326 10.2785 -0.0295861 10.746 0.0197002 11.2082C0.0689864 11.6705 0.209987 12.1183 0.434448 12.5253C0.898488 13.3483 1.66737 13.9558 2.57529 14.217C3.4832 14.4782 4.4574 14.3721 5.28779 13.9216L8.96964 11.899C9.12744 11.8081 9.27089 11.7173 9.44781 11.6455Z"
                    fill="#5FDB89"
                  />
                  <path
                    d="M63.9665 30.7101V22.0563C64.5951 22.7174 65.3559 23.2387 66.1993 23.5862C67.0992 23.9786 68.0708 24.1797 69.0524 24.1769C70.4204 24.1998 71.7645 23.8175 72.9156 23.0782C74.0577 22.3293 74.9793 21.2894 75.5856 20.0656C76.2238 18.702 76.5545 17.2148 76.5545 15.7092C76.5545 14.2036 76.2238 12.7164 75.5856 11.3528C74.9852 10.1282 74.062 9.09074 72.9156 8.35199C71.7604 7.62374 70.4179 7.2481 69.0524 7.27101C68.0227 7.26835 67.0047 7.49008 66.0694 7.92078C65.2133 8.29143 64.452 8.85078 63.8424 9.55703L63.7834 7.57817H59.6484V30.6983L63.9665 30.7101ZM67.7706 20.296C67.1916 20.3141 66.6159 20.2007 66.087 19.9644C65.558 19.7281 65.0895 19.3749 64.7167 18.9315C63.9532 17.9154 63.5404 16.6789 63.5404 15.4079C63.5404 14.137 63.9532 12.9005 64.7167 11.8844C65.1042 11.459 65.5762 11.1191 66.1026 10.8866C66.629 10.654 67.1981 10.5339 67.7736 10.5339C68.349 10.5339 68.9181 10.654 69.4445 10.8866C69.9709 11.1191 70.4429 11.459 70.8305 11.8844C71.5897 12.8989 72.0001 14.1319 72.0001 15.3991C72.0001 16.6662 71.5897 17.8993 70.8305 18.9138C70.4606 19.3574 69.9957 19.712 69.47 19.9513C68.9444 20.1906 68.3716 20.3084 67.7942 20.296H67.7706ZM85.8461 24.2006C86.9022 24.2107 87.9454 23.9677 88.8883 23.4917C89.7577 23.0652 90.5283 22.4616 91.1507 21.7196V23.9052H95.4274V7.61952H91.1802V9.7815C90.6378 9.02039 89.9207 8.40052 89.0891 7.97394C88.1414 7.49575 87.0905 7.25839 86.0293 7.28282C84.6678 7.26221 83.3297 7.63777 82.1779 8.3638C81.0325 9.08853 80.104 10.1089 79.4902 11.3173C78.8444 12.683 78.5095 14.1749 78.5095 15.6856C78.5095 17.1962 78.8444 18.6881 79.4902 20.0538C80.095 21.271 81.0047 22.3109 82.1306 23.0723C83.2318 23.823 84.5372 24.2168 85.8698 24.2006H85.8461ZM86.6082 20.296C86.035 20.313 85.4653 20.2013 84.9409 19.9693C84.4165 19.7373 83.9508 19.3907 83.5778 18.9551C82.8182 17.9296 82.4081 16.6871 82.4081 15.4109C82.4081 14.1347 82.8182 12.8922 83.5778 11.8667C83.9496 11.4293 84.415 11.0812 84.9396 10.8481C85.4641 10.615 86.0344 10.5028 86.6082 10.5199C87.19 10.5007 87.7687 10.6117 88.3022 10.8447C88.8356 11.0777 89.3103 11.4268 89.6916 11.8667C90.4585 12.8892 90.873 14.1328 90.873 15.4109C90.873 16.689 90.4585 17.9326 89.6916 18.9551C89.3118 19.3901 88.8405 19.7358 88.3116 19.9676C87.7827 20.1994 87.2091 20.3116 86.6318 20.296H86.6082ZM105.995 31.3599L108.789 24.2715L115.6 7.95031H110.809L107.265 17.8741L107.035 18.5653C106.964 18.7838 106.887 19.0024 106.804 19.2328C106.621 18.6421 106.438 18.1518 106.255 17.7146L102.12 7.95031H97.4003L104.766 24.3601L101.772 31.3599H105.995ZM123.628 24.2006C124.684 24.2107 125.727 23.9677 126.67 23.4917C127.539 23.0652 128.31 22.4616 128.932 21.7196V23.9052H133.209V7.61952H128.944V9.7815C128.401 9.02039 127.684 8.40052 126.853 7.97394C125.905 7.49575 124.854 7.25839 123.793 7.28282C122.432 7.26221 121.093 7.63777 119.942 8.3638C118.796 9.08853 117.868 10.1089 117.254 11.3173C116.608 12.683 116.273 14.1749 116.273 15.6856C116.273 17.1962 116.608 18.6881 117.254 20.0538C117.859 21.271 118.768 22.3109 119.894 23.0723C120.994 23.8218 122.297 24.2156 123.628 24.2006ZM125.045 20.296C124.471 20.3134 123.9 20.202 123.375 19.97C122.85 19.738 122.383 19.3912 122.009 18.9551C121.249 17.9296 120.839 16.6871 120.839 15.4109C120.839 14.1347 121.249 12.8922 122.009 11.8667C122.381 11.4285 122.848 11.0799 123.373 10.8468C123.899 10.6136 124.47 10.5019 125.045 10.5199C125.626 10.5008 126.204 10.6118 126.737 10.8448C127.269 11.0778 127.743 11.427 128.123 11.8667C128.89 12.8892 129.304 14.1328 129.304 15.4109C129.304 16.689 128.89 17.9326 128.123 18.9551C127.74 19.3955 127.263 19.7445 126.727 19.9765C126.192 20.2085 125.611 20.3177 125.028 20.296H125.045ZM150.127 24.2006V20.5796H142.347L149.867 10.1655V7.28282H137.096V10.8743H144.775L137.096 21.3475V24.2006H150.127ZM159.418 24.2006C160.474 24.2107 161.518 23.9677 162.46 23.4917C163.33 23.0652 164.1 22.4616 164.723 21.7196V23.9052H168.999V7.61952H164.752V9.7815C164.21 9.02039 163.493 8.40052 162.661 7.97394C161.714 7.49575 160.663 7.25839 159.601 7.28282C158.24 7.26221 156.902 7.63777 155.75 8.3638C154.605 9.08853 153.676 10.1089 153.062 11.3173C152.417 12.683 152.082 14.1749 152.082 15.6856C152.082 17.1962 152.417 18.6881 153.062 20.0538C153.667 21.271 154.577 22.3109 155.703 23.0723C156.792 23.8149 158.082 24.2084 159.401 24.2006H159.418ZM160.836 20.296C160.262 20.3134 159.691 20.202 159.166 19.97C158.64 19.738 158.174 19.3912 157.8 18.9551C157.04 17.9296 156.63 16.6871 156.63 15.4109C156.63 14.1347 157.04 12.8922 157.8 11.8667C158.172 11.4285 158.639 11.0799 159.164 10.8468C159.69 10.6136 160.261 10.5019 160.836 10.5199C161.417 10.5012 161.995 10.6124 162.527 10.8454C163.059 11.0784 163.533 11.4273 163.914 11.8667C164.68 12.8892 165.095 14.1328 165.095 15.4109C165.095 16.689 164.68 17.9326 163.914 18.9551C163.532 19.3917 163.059 19.7383 162.528 19.9702C161.997 20.202 161.421 20.3133 160.842 20.296H160.836Z"
                    fill="#15347D"
                  />
                </svg>
              </a>
              <div class="nav-container">
                <nav>
                  <a href="contact.html" class="nav-link">Contact Us</a>
                  <a href="faqpage.html" class="nav-link">FAQs</a>
                  <a href="transpage.html" class="nav-link">Payment History</a>
                </nav>
              </div>
            </header>
          </td>
        </tr>
      </tbody>
    </table>


    <div
      class="transactions-section"
      style="margin-left: 74px; margin-top: 50px"
    >
      <div class="transactions-container">
        <div class="table-style">
          <div class="form-container" method="get">
            <input
              type="text"
              id="search"
              name="search"
              placeholder="Search by Ref...."
            />
          </div>
          <table id="dataTable">
            <thead>
              <tr class="table-header-row">
                <th>Transaction Reference</th>
                <th>Customers</th>
                <th>Date</th>
                <th>Amount</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <script>
            async function fetchAllTransactions() {
              try {
                const response = await fetch(
                  "https://qr-code-payaza-a13a16038b44.herokuapp.com/api/v1/qr-code/getAllTransactions"
                );
                const data = await response.json();
                console.log(data);
                console.log(response);

                if (data) {
                  renderTable(data);
                } else {
                  alert("Transaction not found");
                }
              } catch (error) {
                console.error("Error fetching data:", error);
              }
            }

            window.addEventListener("load", fetchAllTransactions);
            const searchInput = document.getElementById("search");
            const dataTableBody = document.querySelector("#dataTable tbody");

            searchInput.addEventListener("keypress", async (event) => {
              if (event.key === "Enter") {
                const transactionReference = searchInput.value.trim();
                if (!transactionReference) {
                  alert("Please enter a transaction reference");
                  return;
                }

                try {
                  const response = await fetch(
                    "https://qr-code-payaza-a13a16038b44.herokuapp.com/api/v1/qr-code/getAllTransactions"
                  );
                  const data = await response.json();
                  console.log(data);
                  console.log(response);

                  const foundTransaction = data.find(
                    (transaction) =>
                      transaction.transactionReference === transactionReference
                  );
                  if (foundTransaction) {
                    renderTable([foundTransaction]);
                  } else {
                    alert("Transaction not found");
                  }
                } catch (error) {
                  console.error("Error fetching data:", error);
                }
              }
            });

            function renderTable(data) {
              dataTableBody.innerHTML = "";

              data.forEach((item) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                           <td>${item.transactionReference}</td>
                           <td>${item.email}</td>
                           <td>${item.timestamp}</td>
                           <td>â‚¦${item.amount}</td>
                           <td>${item.transactionStatus}</td>
                         `;
                dataTableBody.appendChild(row);
              });
            }
          </script>
        </div>
      </div>

       <table style="margin-left: 500px;">
        <tbody>
          <tr>
            <td>
              <footer>
                <div class="social-icons">
                  <a href="https://instagram.com/mypayaza?igshid=YmMyMTA2M2Y=">
                    <img
                      src="https://res.cloudinary.com/dwb3lhtlk/image/upload/v1693691128/Group_rleplz.png"
                      alt="Instagram"
                    />
                  </a>
                  <a href="https://www.linkedin.com/company/payaza-africa/"
                    ><img
                      src="https://res.cloudinary.com/dwb3lhtlk/image/upload/v1693691180/lin_hgsopn.png"
                      alt="LinkedIn"
                  /></a>
                  <a
                    href="https://twitter.com/mypayaza?s=21&t=HEidzpOXF53mGPKqYJqwaQ"
                    ><img
                      src="https://res.cloudinary.com/dwb3lhtlk/image/upload/v1693691221/Vector_qxrlw2.png"
                      alt="Twitter"
                  /></a>
                  <a
                    href="https://www.facebook.com/profile.php?id=100076362697044&mibextid=LQQJ4d"
                    ><img
                      src="https://res.cloudinary.com/dwb3lhtlk/image/upload/v1693691234/face_pamxlk.png"
                      alt="Facebook"
                  /></a>
                </div>
              </footer>
            </td>
          </tr>
        </tbody>
      </table>

    </div>
  </body>
</html>
